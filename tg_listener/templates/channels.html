{% extends "base.html" %}

{% block content %}

<div style="display: flex; gap: 20px; align-items: start;">
    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª -->
    <div class="card" style="padding: 15px; border: 1px solid #ddd; max-width: 500px; flex-shrink: 0;">
        <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª</h3>
        <form action="{{ url_for('channels') }}" method="POST">
            <div style="margin-bottom: 10px;">
                <input type="text" name="username" placeholder="Username (–±–µ–∑ @, e.g. neuroprofit)" required
                       style="width: 100%; padding: 8px; box-sizing: border-box;">
            </div>
            <div style="margin-bottom: 10px;">
                <input type="text" name="title" placeholder="–ü–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞" required
                       style="width: 100%; padding: 8px; box-sizing: border-box;">
            </div>
            <button type="submit" style="background-color: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; width: auto;">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–Ω–∞–ª
            </button>
        </form>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –≤ –±–∞–∑–µ -->
    <div class="card" style="padding: 15px; border: 1px solid #ddd; max-width: 600px; flex-grow: 1;">
        <h3>üìã –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –≤ –±–∞–∑–µ</h3>

        {% if not channels %}
            <p>–ö–∞–Ω–∞–ª–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –∫–∞–Ω–∞–ª.</p>
        {% endif %}

        {% for ch in channels %}
            <div class="channel-item"
                 style="margin-bottom: 15px; padding: 12px; border-bottom: 1px solid #eee; display: flex; align-items: center;">
                <form method="POST" action="{{ url_for('toggle_channel', channel_id=ch.id) }}" style="display: inline; margin-right: 10px;">
                    <label style="display: inline-block; position: relative; cursor: pointer;">
                        <input type="checkbox" name="toggle" onchange="this.form.submit()"
                               {% if ch.is_monitored %}checked{% endif %}
                               style="appearance: none; -webkit-appearance: none; -moz-appearance: none; width: 22px; height: 22px; border: 2px solid #28a745; background: {% if ch.is_monitored %}#28a745{% else %}white{% endif %}; border-radius: 4px; cursor: pointer; position: relative; outline: none;">
                        {% if ch.is_monitored %}
                            <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: bold; font-size: 18px;">‚úì</span>
                        {% endif %}
                    </label>
                </form>

                <p style="margin: 0; flex-grow: 1; font-weight: {% if ch.is_monitored %}bold{% endif %};">
                    {% if ch.is_monitored %}
                        <span style="background-color: #d4edda; color: #28a745; padding: 2px 6px; border-radius: 4px; font-weight: bold; display: inline;">
                            {{ ch.title }} <span style="color: #28a745;">(@{{ ch.username }})</span>
                        </span>
                    {% else %}
                        {{ ch.title }}
                        <span style="color: #666; font-size: 0.9em;">(@{{ ch.username }})</span>
                    {% endif %}
                </p>

                <form method="POST" action="{{ url_for('delete_channel', channel_id=ch.id) }}" style="display: inline;">
                    <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 4px;"
                            onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª {{ ch.title }}?')">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                </form>
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}